    <!DOCTYPE html>
    <html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <title>Perfil do Usuário</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
    <div class="profile-container">

        <!-- CONTAINER LATERAL COM LINKS -->
        <aside class="left-container">
            <nav>
                <ul>
                    <li><a href="{{ url_for('main') }}">Home</a></li>
                    <li><a href="{{ url_for('profile.view_profile') }}">Meu Perfil</a></li>
                    <li><a href="{{ url_for('auth.logout') }}">Logout</a></li>
                    {% if session['role'] == 'professor' %}
                    <li><a href="{{url_for('professor.dashboard')}}">Minha área</a></li>
                    {% endif %}
                </ul>
            </nav>
        </aside>

        <!-- CONTAINER PRINCIPAL -->
        <main class="right-container">

            <!-- BANNER -->
            <div class="banner">
                <h2>{{ profile.name or 'Usuário' }}</h2>
            </div>

            <!-- FOTO DE PERFIL -->
            {% if profile.profile_picture %}
            <div class="profile-picture">
                <img src="{{ url_for('static', filename='profile_pics/' ~ profile['profile_picture']) }}" 
                    alt="Profile Picture">
            </div>
            {% endif %}

            <!-- MODO DE EXIBIÇÃO -->
            <section class="under-container" id="view-mode">
                <p><strong>Nome completo:</strong> {{ profile.name or '—' }}</p>
                <p><strong>Código Inep da Escola:</strong> {{ profile.institution or '—' }}</p>
                <p><strong>Nome da escola: </strong> {{ name_sch.nome or '—' }} </p>
                {% if session['role']=='aluno' %}
                <p><strong>Série escolar: </strong> {{profile.serie or '—' }}</p>
                {% endif %}
                <p><strong>Data de Nascimento:</strong> {{ profile.birth_date or '—' }}</p>
                <p><strong>Bio:</strong></p>
                <textarea readonly>{{ profile.bio or '' }}</textarea>
                <p><strong>País:</strong> {{ profile.country or '—' }}</p>
                <p><strong>Estado:</strong> {{ name_sch.nome_uf or '—' }}</p>
                <p><strong>Cidade:</strong> {{ name_sch.municipio or '—' }}</p>
                {% if editable %}
                <button id="edit-btn">Editar Perfil</button>
                {% endif %}
            </section>

            <!-- FORMULÁRIO DE EDIÇÃO -->
            <section id="edit-container" class="hidden">
                {% if editable %}
                <form id="edit-form" method="POST" action="{{ url_for('profile.view_profile') }}" enctype="multipart/form-data">
                    
                    <div class="form-column">
                        <label>Nome Completo:</label>
                        <input type="text" name="name" value="{{ profile.name }}">

                        <label>Código Inep da escola: </label>
                        <input type="text" name="institution" value="{{ profile.institution }}">

                        <label>Data de Nascimento:</label>
                        <input type="date" name="birth_date" value="{{ profile.birth_date }}">                     

                        <label>Bio:</label>
                        <textarea name="bio" rows="4">{{ profile.bio }}</textarea>
                    </div>

                    <div class="form-column">
                        {% if session['role'] == 'aluno' %}
                        <label for="serie">Sua série escolar:</label>
                        <select id="series" name="series">
                          <option value="9°Ano">9°Ano</option>
                          <option value="1°Ano EM">1°Ano EM</option>
                          <option value="2°Ano EM">2°Ano EM</option>
                          <option value="3°Ano EM">3°Ano EM</option>
                        </select>
                        {% endif %}

                        <label>País:</label>
                        <input type="text" name="country" value="{{ profile.country }}">

                        <label>Estado:</label>
                        <input type="text" name="state" value="{{ name_sch.nome_uf }}">

                        <label>Cidade:</label>
                        <input type="text" name="city" value="{{ name_sch.municipio }}">

                        <label>Foto de Perfil:</label>
                        <input type="file" name="profile_picture">
                    </div>

                    <div class="form-buttons">
                        <button type="submit">Salvar</button>
                        <button type="button" id="cancel-btn">Cancelar</button>
                    </div>

                </form>
                {% endif %}
            </section>

        </main>
    </div>
    {% if editable %}
    <script>
        const editBtn = document.getElementById('edit-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const viewMode = document.getElementById('view-mode');
        const editContainer = document.getElementById('edit-container');
            
        editBtn.addEventListener('click', () => {
            viewMode.classList.add('hidden');    // esconde view
            editContainer.classList.remove('hidden'); // mostra formulário
        });
        
        cancelBtn.addEventListener('click', () => {
            viewMode.classList.remove('hidden'); // mostra view
            editContainer.classList.add('hidden'); // esconde formulário
        });

    </script>
    {% endif %}
    </body>
    </html>
